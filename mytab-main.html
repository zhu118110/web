<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title>底部选项卡</title>
    <script src="js/mui.min.js"></script>
    <link href="css/mui.min.css" rel="stylesheet"/>
	<link rel="stylesheet" type="text/css" href="fonts/font.css"/>
    <style type="text/css">
    	.mui-bar-tab .mui-tab-item.mui-active{
			color: red;
		}
		.my-mui-bar{
			border-top: 1px solid #c8c7cc;
		}
    </style>
</head>
<body>
	
		<nav class="mui-bar mui-bar-tab my-mui-bar">
			<a class="mui-tab-item mui-active" href="pages/index/index.html" data-id="index">
				<span class="mui-icon mui-icon-home"></span>
				<span class="mui-tab-label">首页</span>
			</a>
			<a class="mui-tab-item" href="pages/classify/classify.html" data-id="classify">
				<span class="mui-icon mui-icon-list"></span>
				<span class="mui-tab-label">分类</span>
			</a>
			<a class="mui-tab-item" href="pages/shopCar/shopCar.html" data-id="shopCar">
				<span class="mui-icon iconfont icon-gouwuchekong"></span>
				<span class="mui-tab-label"> 购物车</span>
			</a>
			<a class="mui-tab-item" href="pages/aboutMe/aboutMe.html" data-id="aboutMe">
				<span class="mui-icon mui-icon-contact"></span>
				<span class="mui-tab-label">我的</span>
			</a>
		</nav>
	
</body>
	<script type="text/javascript" charset="utf-8">
	
		mui.init();
		mui.plusReady(function () {
			var self = plus.webview.currentWebview(); 
			
			var styles = {  
				top: '0',  
				bottom: '50px',
				render: 'always',
			};  
			// 子窗口属性
			// var tabsConfig = {
			// 	index: {  
			// 		url: 'pages/index/index.html',  
			// 		styles: styles,  
			// 		default: true  
			// 	},  
			// 	classify: {  
			// 		url: 'pages/classify/classify.html',  
			// 		styles: styles,
					
			// 	},  
			// 	shopCar: {  
			// 		url: 'pages/shopCar/shopCar.html',  
			// 		styles: styles  
			// 	},  
			// 	aboutMe: {  
			// 		url: 'pages/aboutMe/aboutMe.html',  
			// 		styles: styles  
			// 	}  
			// };  
			var tabsConfig = [{  
					url:'pages/index/index.html',  
					id:"index",
					styles: styles,
					default: true ,
					
				}];  
			
			var current;  //记录当前窗口id
			
			// for (id in tabsConfig) {
			// 	// 创建webview子窗口,如主页，分类页面等。
			// 	tabs[id] = plus.webview.create(tabsConfig[id].url, id, tabsConfig[id].styles); 
			// 	// 如果子窗口属性中有default属性,把这个子窗口添加到webview窗口中
			// 	if (tabsConfig[id]['default']) {  
			// 		// 在Webview窗口中添加子窗口，子窗口必须是 plus.webview.create（）中创建过的
			// 		self.append(tabs[id]);  
				
			// 		current = id;
			// 	}
			// }  
			
			for(let i=0;i<1;i++){
				var sub = plus.webview.create(tabsConfig[i].url, tabsConfig[i].id, styles); 
				if (i > 0) {
					sub.hide();
				};
				if(tabsConfig[i].id=="index"){
					var index = plus.webview.getWebviewById('index');
					mui.fire(index,"loadsubpages",{
						flag:false
					})
				}
				self.append(sub);
				current=tabsConfig[i].url;
			
				
			};
			mui('.mui-bar-tab').on('tap', 'a', function(e) {
				let href=this.getAttribute("href");
				let id=this.getAttribute("data-id");
				var index = plus.webview.getWebviewById('index');
				if (href==current) {  
					return;  
				}  
				if(id=="index"){
					
					mui.fire(index,"loadsubpages",{
						flag:false
					})
				}else{
					mui.fire(index,"loadsubpages",{
						flag:true
					})
				}
				var self = plus.webview.currentWebview();
				var sub = plus.webview.create(href, id, styles);
				self.append(sub);
				//隐藏当前;
				plus.webview.close(current);
				
				current = href;  
			});  
			
			// 点击导航时跳转
			// mui('.mui-bar-tab').on('tap', 'a', function(e) {  
			// 	if (current == this.dataset.id) {  
			// 		mui.fire(tabs[current], 'scroll2top');  
			// 		return;  
			// 	}  
			// 	tabs[this.dataset.id].show();
			// 	tabs[current].hide();  
			// 	current = this.dataset.id;  
			// });  
			
			
		})
	
   
    </script>
</html>